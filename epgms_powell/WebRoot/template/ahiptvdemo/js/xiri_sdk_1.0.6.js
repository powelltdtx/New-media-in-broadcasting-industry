!function(t){"function"==typeof define&&define.amd?define("xiri",t):window.Xiri=t()}(function(){function t(){}function e(t){this._callback=t}return t.prototype.Scene=function(t,e,n,s){this._scene=t,this._commands=e,this._feedbacks=n,this._fuzzy_words=s},e.prototype.regist=function(){var t=new XMLHttpRequest;return function(e){var n=this;n.uuid=+new Date,t.open("POST","http://127.0.0.1:44570/postkeyword",!0),t.setRequestHeader("Content-Type","application/json;charset=utf-8"),t.setRequestHeader("uuid",n.uuid),t.send(JSON.stringify(e)),t.onreadystatechange=function(){if(4==this.readyState)return 200!=this.status?void setTimeout(function(){n.regist(e)},1e3):void!function(){var t=new XMLHttpRequest;!function e(){t.open("GET","http://127.0.0.1:44570/getcmd",!0),t.setRequestHeader("uuid",n.uuid),t.send(),t.onreadystatechange=function(){if(4==this.readyState){if(200==this.status&&this.responseText)try{n._callback(JSON.parse(this.responseText))}catch(t){window.console&&window.console.log(t.name+": "+t.message)}setTimeout(function(){e()},200)}}}()}()}}}(),e.prototype.syncViewState=function(){var t=new XMLHttpRequest;return function(e){var n=this;t.open("POST","http://127.0.0.1:44570/syncviewstate",!0),t.setRequestHeader("Content-Type","application/json;charset=utf-8"),t.send(JSON.stringify(e)),t.onreadystatechange=function(){4==this.readyState&&200!=this.status&&setTimeout(function(){n.syncViewState(e)},1e3)}}}(),e.prototype.syncChannelInfo=function(){var t=new XMLHttpRequest;return function(e){var n=this;t.open("POST","http://127.0.0.1:44570/syncchannelinfo",!0),t.setRequestHeader("Content-Type","application/json;charset=utf-8"),t.send(JSON.stringify(e)),t.onreadystatechange=function(){4==this.readyState&&200!=this.status&&setTimeout(function(){n.syncChannelInfo(e)},1e3)}}}(),e.prototype.syncClientInfo=function(){var t=new XMLHttpRequest;return function(e){var n=this;t.open("POST","http://127.0.0.1:44570/syncclientinfo",!0),t.setRequestHeader("Content-Type","application/json;charset=utf-8"),t.send(JSON.stringify(e)),t.onreadystatechange=function(){4==this.readyState&&200!=this.status&&setTimeout(function(){n.syncClientInfo(e)},1e3)}}}(),t.prototype.Listener=e,new t});